{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/mnt/c/Users/82107/Desktop/study/3-2/\\uC6F9\\uC2DC\\uC124/\\uD504\\uB85C\\uC81D\\uD2B8/Dream_Search/frontend/src/components/CommentForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from 'react';\nimport Star from './Star';\n\nconst CommentForm = ({\n  article,\n  onSubmit,\n  onHandle\n}) => {\n  _s();\n\n  const [idx, setIdx] = useState(0);\n  const [rating, setRating] = useState(0);\n  const [cacheIdx, setCacheIdx] = useState(0);\n  const [cacheRating, setCacheRating] = useState(0);\n  const content = useRef();\n\n  const _mouseOver = (e, i) => {\n    e.persist();\n    let offsetX = e.nativeEvent.offsetX;\n    let clientX = e.target.clientWidth;\n\n    if (offsetX > clientX / 2) {\n      let value = 2;\n      setIdx(i);\n      setRating(value);\n    } else {\n      let value = 1;\n      setIdx(i);\n      setRating(value);\n    }\n  };\n\n  const handleChange = (i, v) => {\n    setIdx(0);\n    setRating(0);\n    setCacheIdx(i);\n    setCacheRating(v);\n  };\n\n  const resetComment = () => {\n    setCacheIdx(0);\n    setCacheRating(0);\n    content.current.value = '';\n  };\n\n  const submit = async () => {\n    const comment = {\n      content: content.current.value,\n      rating: cacheRating\n    };\n    const formData = {\n      article: article,\n      comment: comment,\n      author: article.author\n    };\n    resetComment();\n    console.log(formData);\n    await onSubmit(formData);\n    onHandle();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"control-group\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"form-group controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        class: \"form-control\",\n        cols: \"50\",\n        rows: \"3\",\n        ref: content,\n        placeholder: \"Comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        class: \"help-block text-danger\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => submit(),\n        class: \"btn btn-primary\",\n        id: \"sendMessageButton\",\n        children: \"Comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Star, {\n        _mouseOver: _mouseOver,\n        onChange: handleChange,\n        idx: idx,\n        rating: rating,\n        cacheIdx: cacheIdx,\n        cacheRating: cacheRating\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CommentForm, \"esb+8AEx9x3ZP2mUBVECjVi80gU=\");\n\n_c = CommentForm;\nexport default CommentForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommentForm\");","map":{"version":3,"sources":["/mnt/c/Users/82107/Desktop/study/3-2/웹시설/프로젝트/Dream_Search/frontend/src/components/CommentForm.js"],"names":["React","useRef","useState","Star","CommentForm","article","onSubmit","onHandle","idx","setIdx","rating","setRating","cacheIdx","setCacheIdx","cacheRating","setCacheRating","content","_mouseOver","e","i","persist","offsetX","nativeEvent","clientX","target","clientWidth","value","handleChange","v","resetComment","current","submit","comment","formData","author","console","log"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react'\r\nimport Star from './Star'\r\n\r\nconst CommentForm = ({ article, onSubmit, onHandle }) => {\r\n    const [idx, setIdx] = useState(0);\r\n    const [rating, setRating] = useState(0);\r\n    const [cacheIdx, setCacheIdx] = useState(0);\r\n    const [cacheRating, setCacheRating] = useState(0);\r\n\r\n    const content = useRef();\r\n\r\n    const _mouseOver = (e, i) => {\r\n        e.persist()\r\n        let offsetX = e.nativeEvent.offsetX;\r\n        let clientX = e.target.clientWidth;\r\n\r\n        if (offsetX > clientX / 2) {\r\n            let value = 2;\r\n            setIdx(i);\r\n            setRating(value);\r\n        } else {\r\n            let value = 1;\r\n            setIdx(i);\r\n            setRating(value);\r\n        }\r\n    }\r\n\r\n    const handleChange = (i, v) => {\r\n        setIdx(0);\r\n        setRating(0);\r\n        setCacheIdx(i);\r\n        setCacheRating(v);\r\n    }\r\n\r\n    const resetComment = () => {\r\n        setCacheIdx(0);\r\n        setCacheRating(0);\r\n        content.current.value = '';\r\n    }\r\n\r\n    const submit = async () => {\r\n        const comment = {\r\n            content: content.current.value,\r\n            rating: cacheRating\r\n        }\r\n        const formData = {\r\n            article: article,\r\n            comment: comment,\r\n            author: article.author\r\n        }\r\n        resetComment();\r\n        console.log(formData);\r\n        await onSubmit(formData);\r\n        onHandle();\r\n    }\r\n\r\n    return (\r\n        <div class=\"control-group\">\r\n            <div class=\"form-group controls\">\r\n                <textarea class=\"form-control\" cols=\"50\" rows=\"3\" ref={content} placeholder=\"Comment\" />\r\n                <p class=\"help-block text-danger\"></p>\r\n            </div>\r\n            <span>\r\n            <button onClick={() => submit()} class=\"btn btn-primary\" id=\"sendMessageButton\">Comment</button>\r\n            <Star\r\n                _mouseOver={_mouseOver}\r\n                onChange={handleChange}\r\n                idx={idx}\r\n                rating={rating}\r\n                cacheIdx={cacheIdx}\r\n                cacheRating={cacheRating} />\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CommentForm;"]},"metadata":{},"sourceType":"module"}