{"ast":null,"code":"import _regeneratorRuntime from\"/mnt/c/Users/82107/Desktop/study/3-2/\\uC6F9\\uC2DC\\uC124/\\uD504\\uB85C\\uC81D\\uD2B8/Dream_Search/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/mnt/c/Users/82107/Desktop/study/3-2/\\uC6F9\\uC2DC\\uC124/\\uD504\\uB85C\\uC81D\\uD2B8/Dream_Search/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/mnt/c/Users/82107/Desktop/study/3-2/\\uC6F9\\uC2DC\\uC124/\\uD504\\uB85C\\uC81D\\uD2B8/Dream_Search/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useRef,useEffect}from'react';import{withRouter}from'react-router-dom';import request from'../libs/request';var ArticleForm=function ArticleForm(props){var _props$article2,_props$article3;var title=useRef();var content=useRef();var _useState=useState(),_useState2=_slicedToArray(_useState,2),author=_useState2[0],setAuthor=_useState2[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return request.getUser(window.sessionStorage.getItem('n_name'));case 2:user=_context.sent;setAuthor(user);case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _props$article;var formData,article;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:formData={title:title.current.value,content:content.current.value,author:author,_id:(_props$article=props.article)===null||_props$article===void 0?void 0:_props$article._id};console.log(formData);_context2.next=4;return props.onSubmit(formData);case 4:article=_context2.sent;if(!props.article){_context2.next=9;break;};_context2.next=11;break;case 9:_context2.next=11;return request.setUserArticle(article);case 11:props.history.push('/');case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function submit(){return _ref.apply(this,arguments);};}();var cancel=function cancel(){props.history.goBack();};return/*#__PURE__*/_jsxs(\"div\",{name:\"sentMessage\",id:\"contactForm\",novalidate:true,children:[/*#__PURE__*/_jsx(\"div\",{class:\"control-group\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"form-group controls\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control\",ref:title,id:\"name\",defaultValue:(_props$article2=props.article)===null||_props$article2===void 0?void 0:_props$article2.title})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"control-group\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"form-group controls\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Content\"}),/*#__PURE__*/_jsx(\"textarea\",{class:\"form-control\",cols:\"50\",rows:\"5\",ref:content,defaultValue:(_props$article3=props.article)===null||_props$article3===void 0?void 0:_props$article3.content}),/*#__PURE__*/_jsx(\"p\",{class:\"help-block text-danger\"})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{id:\"success\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return submit();},class:\"btn btn-primary\",id:\"sendMessageButton\",children:\"Send\"}),\"\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return cancel();},class:\"btn btn-primary\",id:\"sendMessageButton\",children:\"Cancel\"})]});};export default withRouter(ArticleForm);","map":{"version":3,"sources":["/mnt/c/Users/82107/Desktop/study/3-2/웹시설/프로젝트/Dream_Search/frontend/src/components/ArticleForm.js"],"names":["React","useState","useRef","useEffect","withRouter","request","ArticleForm","props","title","content","author","setAuthor","fetchData","getUser","window","sessionStorage","getItem","user","submit","formData","current","value","_id","article","console","log","onSubmit","setUserArticle","history","push","cancel","goBack"],"mappings":"4uBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,CAAkCC,SAAlC,KAAmD,OAAnD,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,OAAP,KAAoB,iBAApB,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,qCAC3B,GAAMC,CAAAA,KAAK,CAAGN,MAAM,EAApB,CACA,GAAMO,CAAAA,OAAO,CAAGP,MAAM,EAAtB,CAF2B,cAGCD,QAAQ,EAHT,wCAGpBS,MAHoB,eAGZC,SAHY,eAK3BR,SAAS,CAAC,UAAI,SACKS,CAAAA,SADL,qIACV,kKACuBP,CAAAA,OAAO,CAACQ,OAAR,CAAgBC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,QAA9B,CAAhB,CADvB,QACUC,IADV,eAEIN,SAAS,CAACM,IAAD,CAAT,CAFJ,sDADU,4CAKVL,SAAS,GACZ,CANQ,CAMP,EANO,CAAT,CAQA,GAAMM,CAAAA,MAAM,0FAAG,gLACLC,QADK,CACM,CACbX,KAAK,CAAGA,KAAK,CAACY,OAAN,CAAcC,KADT,CAEbZ,OAAO,CAAGA,OAAO,CAACW,OAAR,CAAgBC,KAFb,CAGbX,MAAM,CAAGA,MAHI,CAIbY,GAAG,iBAAGf,KAAK,CAACgB,OAAT,yCAAG,eAAeD,GAJR,CADN,CAOXE,OAAO,CAACC,GAAR,CAAYN,QAAZ,EAPW,uBAQWZ,CAAAA,KAAK,CAACmB,QAAN,CAAeP,QAAf,CARX,QAQLI,OARK,oBASRhB,KAAK,CAACgB,OATE,0BASM,CATN,uDAWHlB,CAAAA,OAAO,CAACsB,cAAR,CAAuBJ,OAAvB,CAXG,SAaXhB,KAAK,CAACqB,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EAbW,yDAAH,kBAANX,CAAAA,MAAM,0CAAZ,CAeA,GAAMY,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjBvB,KAAK,CAACqB,OAAN,CAAcG,MAAd,GACH,CAFD,CAGA,mBACI,aAAK,IAAI,CAAC,aAAV,CAAwB,EAAE,CAAC,aAA3B,CAAyC,UAAU,KAAnD,wBACE,YAAK,KAAK,CAAC,eAAX,uBACE,aAAK,KAAK,CAAC,qBAAX,wBACE,gCADF,cAEE,cAAO,IAAI,CAAC,MAAZ,CAAmB,KAAK,CAAC,cAAzB,CAAwC,GAAG,CAAEvB,KAA7C,CAAoD,EAAE,CAAC,MAAvD,CAA8D,YAAY,kBAAED,KAAK,CAACgB,OAAR,0CAAE,gBAAef,KAA3F,EAFF,GADF,EADF,cAOE,YAAK,KAAK,CAAC,eAAX,uBACE,aAAK,KAAK,CAAC,qBAAX,wBACE,kCADF,cAEE,iBAAU,KAAK,CAAC,cAAhB,CAA+B,IAAI,CAAC,IAApC,CAAyC,IAAI,CAAC,GAA9C,CAAkD,GAAG,CAAEC,OAAvD,CAAgE,YAAY,kBAAEF,KAAK,CAACgB,OAAR,0CAAE,gBAAed,OAA7F,EAFF,cAGE,UAAG,KAAK,CAAC,wBAAT,EAHF,GADF,EAPF,cAcE,aAdF,cAeE,YAAK,EAAE,CAAC,SAAR,EAfF,cAgBE,eAAQ,OAAO,CAAE,yBAAIS,CAAAA,MAAM,EAAV,EAAjB,CAA+B,KAAK,CAAC,iBAArC,CAAuD,EAAE,CAAC,mBAA1D,kBAhBF,iCAkBE,eAAQ,OAAO,CAAE,yBAAIY,CAAAA,MAAM,EAAV,EAAjB,CAA+B,KAAK,CAAC,iBAArC,CAAuD,EAAE,CAAC,mBAA1D,oBAlBF,GADJ,CAsBH,CArDD,CAuDA,cAAe1B,CAAAA,UAAU,CAACE,WAAD,CAAzB","sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\r\nimport {withRouter} from 'react-router-dom'\r\nimport request from '../libs/request'\r\n\r\nconst ArticleForm = (props) => {\r\n    const title = useRef();\r\n    const content = useRef();\r\n    const [author, setAuthor] = useState();\r\n\r\n    useEffect(()=>{\r\n        async function fetchData(){\r\n            const user = await request.getUser(window.sessionStorage.getItem('n_name'));\r\n            setAuthor(user);\r\n        }\r\n        fetchData();\r\n    },[])\r\n    \r\n    const submit = async() => {\r\n        const formData = {\r\n            title : title.current.value,\r\n            content : content.current.value,\r\n            author : author,\r\n            _id : props.article?._id\r\n        }\r\n        console.log(formData);\r\n        const article = await props.onSubmit(formData);\r\n        if(props.article);\r\n        else\r\n          await request.setUserArticle(article);\r\n\r\n        props.history.push('/');\r\n    }\r\n    const cancel = () => {\r\n        props.history.goBack();\r\n    }\r\n    return(\r\n        <div name=\"sentMessage\" id=\"contactForm\" novalidate>\r\n          <div class=\"control-group\">\r\n            <div class=\"form-group controls\">\r\n              <label>Title</label>\r\n              <input type=\"text\" class=\"form-control\" ref={title} id=\"name\" defaultValue={props.article?.title}/>\r\n            </div>\r\n          </div>\r\n          <div class=\"control-group\">\r\n            <div class=\"form-group controls\">\r\n              <label>Content</label>\r\n              <textarea class=\"form-control\" cols=\"50\" rows=\"5\" ref={content} defaultValue={props.article?.content}/>\r\n              <p class=\"help-block text-danger\"></p>\r\n            </div>\r\n          </div>\r\n          <br />\r\n          <div id=\"success\"></div>\r\n          <button onClick={()=>submit()} class=\"btn btn-primary\" id=\"sendMessageButton\">Send</button>\r\n          &nbsp;&nbsp;&nbsp;&nbsp;\r\n          <button onClick={()=>cancel()} class=\"btn btn-primary\" id=\"sendMessageButton\">Cancel</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(ArticleForm);"]},"metadata":{},"sourceType":"module"}